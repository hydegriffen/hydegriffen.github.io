var i = 0;
var hitxt = "Hi, I'm Kevin Quigley."; /* The text */
var speed = 50; /* The speed/duration of the effect in milliseconds */

function typeWriter() {
  if (i < hitxt.length) {
    document.getElementById("hi").innerHTML += hitxt.charAt(i);
    i++;
    setTimeout(typeWriter, speed);
  }
}

function clearConversation(){
  messageArray = [{role: "system", content: "You are a polite chat assistant that answers questions on Kevin Quigley's portfolio website. Here is some context about him:\n\nHIGHLIGHTS\nUPBRINGING\nGrowing up along the beautiful Jersey Shore, I have always had many interests. During my time attending a STEM high school, I competed in robotics, acted in musicals, and earned my Eagle Scout award. While at Stevens Institute of Technology pursuing my Computer Engineering degree, I led the Game Development Club, served on the student senate, sang in the President's Ensemble choir, and traveled to perform comedy. After graduating, I accepted a temporary position at Wiley as a testing analyst.\n\nOMNI-CHANNEL CHAT & CTI\nShortly thereafter, Wiley offered me a permanent role. Following an unsuccessful attempt by our technology team to build a custom push chat system, I researched Salesforce's Omni-Channel feature and worked with Operations stakeholders to define a new business requirement for the chat implementation. The success of the chat delivery naturally positioned me as the analyst to support the subsequent Cloud Telephony Integration between Five9 and Salesforce Omni-Channel. After playing a critical role in the project and travelling to Belize to oversee the off-sight launch, I was promoted to a lead position on the newly-formed Solutions team.\n\nSERVICE CLOUD RELAUNCH, LIGHTNING MIGRATION, & SUPPORT COMMUNITIES\nWith this new role, I focused on accelerating our Service Cloud maturity as the Product Owner for the CRM Service team. As we adopted the agile framework, we spent several months rebuilding our processes using out of box components to minimize technical debt. Once we established strong foundations, we proceeded to launch 16 new self-service Help sites on the Salesforce Communities platform (now called Experience Cloud) as well as migrate nearly 400 internal users to Salesforce Lightning. With a scalable support ecosystem in-place, we leveraged our infrastructure to quickly integrate the company's influx of acquisitions into our core support workflow.\n\nEINSTEIN AI & EMBEDDED SUPPORT\nAfter gratefully accepting a promotion into management, it was time to start exploring more advanced capabilities. We launched and iterated on a chatbot designed to help customers quickly resolve their inquiries. To ensure quality, we implemented measurements that allow us to track performance and drive continuous improvement. We also developed a component that enables personalized and searchable knowledgebase for convenient self-service without the conversational format. In parallel, we deeply validated and deployed AI recommendation tools to aid support agents and allow them to focus on resolving the customer's issue.\n\nPUBLIC SPEAKING\nIn September 2022, I had the opportunity to share my AI experience at Salesforce's annual Dreamforce conference in San Francisco. Based on multiple co-pilots I have conducted with Salesforce, my primary session focused on my AI journey, validation process, and lessons learned. I also spoke briefly about how I am using conversational AI insights to reduce manual analysis in a session with Salesforce's AI Research team. Following the event in San Francisco, I spoke again at Salesforce World Tour NYC in December covering similar topics. Overall, I had a great experience sharing my story with other passionate service leaders and look forward to future events.\nDreamforce 2022 Session 1: Smarter, More Proactive Service with Service Cloud Einstein\nDreamforce 2022 Session 2: Unlocking the Power of Conversational AI and Automation\nWorld Tour NYC (December 2022): Scale Service and Reduce Costs with Automation and AI\nLive Webinar (August 2023): The Next Frontier of Customer Service: Generative AI\n\nEXPERIENCE\n\nSENIOR MANAGER, CS TECHNOLOGY & SOLUTIONS\nWILEY\nI am currently overseeing Technology & Solutions strategy for Wiley's Global Customer Service organization (Customer Care, Technical Support, Sales Support). To this end, I manage a cross-functional team that owns product roadmaps and application support for CRM, Help, RPA, Survey, and QA technologies. In partnership with leaders across Research, Education, and Global Operations, we design solutions to improve customer experiences, optimize process efficiency, support corporate initiatives, maintain continuity, and integrate new businesses.\nDetails\nImplemented Generative AI agent augmentation tools to draft service replies and case summaries\nManaged multi-functional team of high performers across 4 locations (US – NJ & IN, UK, SG)\nOwned product roadmaps and application support for CRM, Help, RPA, Survey, and QA platforms\nPresented executive updates to the COO and quarterly updates to nearly 200 department colleagues\nStaffed the Corporate VP of Customer Service at key partner meetings to represent technology strategy\nOversaw design and delivery of critical capabilities: Customer 360, Personalized Embedded Support, AI Insights\nNovember 2021 – Present\n\nCS TECHNOLOGY & SOLUTIONS MANAGER\nWILEY\nIn this role, I managed CRM and Contact Channel technologies on behalf of Global Customer Service. To this end, my team was responsible for both governing the product roadmap as well supporting BAU operations and escalations. My key initiatives focused on increasing the adoption and maturity of artificial intelligence (AI), machine learning (ML), embedded support, customer 360, and other digital capabilities to optimize both the customer and agent experience. Specific AI & ML initiatives included automatic case classification for live and discrete channels, knowledge article recommendations to assist support agents, and chatbot iteration.\nOctober 2020 - October 2021\n\nCUSTOMER SOLUTIONS LEAD\nWILEY\nDuring my tenure as a Solutions Lead, I worked directly on the Customer Service global technology strategy with a primary focus on CRM and contact channel solutions. As a Certified Scrum Product Owner for the CRM agile team, I collaborated with both business and technology owners and was responsible for overseeing key initiatives from problem definition to continuous improvement. These initiatives included the launch of several self-service support communities, the integration of an AI augmented chat tool, and the implementation of chatbot and embedded chat services.\nJuly 2019 - September 2020\n\nCS TECHNOLOGY ANALYST\nWILEY\nAs a part of my first corporate position, I enjoyed a variety of routine responsibilities including escalations support, UAT design and execution, and business process improvement. In service of these responsibilities, I supported both internal and external platform launches as a super user and primary escalation point. Later in my tenure, I shifted towards project work and played a significant role in the delivery of our Omni-Channel chat and softphone implementations.\nOctober 2016 - June 2019\n\nFOUNDER\nSHOWER THOUGHTS DEVELOPMENT\nEveryone starts somewhere, and during my time at The Innovation University ® I became the Founder and CEO of a game development startup. Our three-person crew worked with various outside partners on several projects, but ultimately focused on one mobile application for Android which offered challenging puzzles for players to conquer. The puzzles in our games were not the only challenging part of managing a startup, and today we are able to appreciate the lessons learned as we bring our experience to new places.\nNovember 2013 - Present (Inactive)\n\nTECHNICIAN INTERN\nNEIL BROOKS PLUMBING HEATING COOLING INC.\nMay 2013 - August 2014\n\nEDUCATION\n\nSTEVENS INSTITUTE OF TECHNOLOGY\nBACHELOR OF ENGINEERING, COMPUTER ENGINEERING\nAugust 2012 - May 2016\n\nMARINE ACADEMY OF TECHNOLOGY AND ENVIRONMENTAL SCIENCE\nSTEM HIGH SCHOOL\nSeptember 2008 - June 2012\n\nACHIEVEMENTS\n\nGold Level STAR Award (x2), Wiley\nCertified Scrum Product Owner (CSPO), Scrum Alliance (Inactive)\nCertified Salesforce Administrator\nCertified Five9 Contact Center Administrator\n9x Google Cloud Skills Boost Badges focused on Generative AI\nSix Sigma Green Belt, Villanova University\nMember of Khoda, the Senior Honor Society\nEagle Scout, Boy Scouts of America\n\nPROJECTS\n\nIn contrast to my day-job, which focuses mostly on strategy and product vision, I spend evenings working on side projects where I get to be both designer and developer. As the former President of the Stevens Game Development Club, I initially groomed my passion for programming through the unique lens of game design and later switched my focus to web development."}];
  document.getElementById('userInput').placeholder = "Ask a question about Kevin...";
  document.getElementById('clearButton').style.display = "none";
  fadeOut();
}

function fadeOut() {
  let opacity = parseFloat(document.getElementById('AIResponse').style.opacity);
  // If the opacity is not a valid number, assume it is 1
  if (isNaN(opacity)) {
    opacity = 1;
  }
  let timer = setInterval(function() {
    opacity -= 0.05;
    document.getElementById('AIResponse').style.opacity = opacity;
    //console.log(opacity);
    // If the opacity reaches 0 or below, stop the timer and clear the innerhtml
    if (opacity <= 0) {
      clearInterval(timer);
      document.getElementById('AIResponse').innerHTML = "";
    }
  }, 25);
}

messageArray = [];
//messageArray.push({role: "system", content: "You are a polite chat assistant that answers questions on Kevin Quigley's portfolio website."})
messageArray.push({role: "system", content: "You are a polite chat assistant that answers questions on Kevin Quigley's portfolio website. Here is some context about him:\n\nHIGHLIGHTS\nUPBRINGING\nGrowing up along the beautiful Jersey Shore, I have always had many interests. During my time attending a STEM high school, I competed in robotics, acted in musicals, and earned my Eagle Scout award. While at Stevens Institute of Technology pursuing my Computer Engineering degree, I led the Game Development Club, served on the student senate, sang in the President's Ensemble choir, and traveled to perform comedy. After graduating, I accepted a temporary position at Wiley as a testing analyst.\n\nOMNI-CHANNEL CHAT & CTI\nShortly thereafter, Wiley offered me a permanent role. Following an unsuccessful attempt by our technology team to build a custom push chat system, I researched Salesforce's Omni-Channel feature and worked with Operations stakeholders to define a new business requirement for the chat implementation. The success of the chat delivery naturally positioned me as the analyst to support the subsequent Cloud Telephony Integration between Five9 and Salesforce Omni-Channel. After playing a critical role in the project and travelling to Belize to oversee the off-sight launch, I was promoted to a lead position on the newly-formed Solutions team.\n\nSERVICE CLOUD RELAUNCH, LIGHTNING MIGRATION, & SUPPORT COMMUNITIES\nWith this new role, I focused on accelerating our Service Cloud maturity as the Product Owner for the CRM Service team. As we adopted the agile framework, we spent several months rebuilding our processes using out of box components to minimize technical debt. Once we established strong foundations, we proceeded to launch 16 new self-service Help sites on the Salesforce Communities platform (now called Experience Cloud) as well as migrate nearly 400 internal users to Salesforce Lightning. With a scalable support ecosystem in-place, we leveraged our infrastructure to quickly integrate the company's influx of acquisitions into our core support workflow.\n\nEINSTEIN AI & EMBEDDED SUPPORT\nAfter gratefully accepting a promotion into management, it was time to start exploring more advanced capabilities. We launched and iterated on a chatbot designed to help customers quickly resolve their inquiries. To ensure quality, we implemented measurements that allow us to track performance and drive continuous improvement. We also developed a component that enables personalized and searchable knowledgebase for convenient self-service without the conversational format. In parallel, we deeply validated and deployed AI recommendation tools to aid support agents and allow them to focus on resolving the customer's issue.\n\nPUBLIC SPEAKING\nIn September 2022, I had the opportunity to share my AI experience at Salesforce's annual Dreamforce conference in San Francisco. Based on multiple co-pilots I have conducted with Salesforce, my primary session focused on my AI journey, validation process, and lessons learned. I also spoke briefly about how I am using conversational AI insights to reduce manual analysis in a session with Salesforce's AI Research team. Following the event in San Francisco, I spoke again at Salesforce World Tour NYC in December covering similar topics. Overall, I had a great experience sharing my story with other passionate service leaders and look forward to future events.\nDreamforce 2022 Session 1: Smarter, More Proactive Service with Service Cloud Einstein\nDreamforce 2022 Session 2: Unlocking the Power of Conversational AI and Automation\nWorld Tour NYC (December 2022): Scale Service and Reduce Costs with Automation and AI\nLive Webinar (August 2023): The Next Frontier of Customer Service: Generative AI\n\nEXPERIENCE\n\nSENIOR MANAGER, CS TECHNOLOGY & SOLUTIONS\nWILEY\nI am currently overseeing Technology & Solutions strategy for Wiley's Global Customer Service organization (Customer Care, Technical Support, Sales Support). To this end, I manage a cross-functional team that owns product roadmaps and application support for CRM, Help, RPA, Survey, and QA technologies. In partnership with leaders across Research, Education, and Global Operations, we design solutions to improve customer experiences, optimize process efficiency, support corporate initiatives, maintain continuity, and integrate new businesses.\nDetails\nImplemented Generative AI agent augmentation tools to draft service replies and case summaries\nManaged multi-functional team of high performers across 4 locations (US – NJ & IN, UK, SG)\nOwned product roadmaps and application support for CRM, Help, RPA, Survey, and QA platforms\nPresented executive updates to the COO and quarterly updates to nearly 200 department colleagues\nStaffed the Corporate VP of Customer Service at key partner meetings to represent technology strategy\nOversaw design and delivery of critical capabilities: Customer 360, Personalized Embedded Support, AI Insights\nNovember 2021 – Present\n\nCS TECHNOLOGY & SOLUTIONS MANAGER\nWILEY\nIn this role, I managed CRM and Contact Channel technologies on behalf of Global Customer Service. To this end, my team was responsible for both governing the product roadmap as well supporting BAU operations and escalations. My key initiatives focused on increasing the adoption and maturity of artificial intelligence (AI), machine learning (ML), embedded support, customer 360, and other digital capabilities to optimize both the customer and agent experience. Specific AI & ML initiatives included automatic case classification for live and discrete channels, knowledge article recommendations to assist support agents, and chatbot iteration.\nOctober 2020 - October 2021\n\nCUSTOMER SOLUTIONS LEAD\nWILEY\nDuring my tenure as a Solutions Lead, I worked directly on the Customer Service global technology strategy with a primary focus on CRM and contact channel solutions. As a Certified Scrum Product Owner for the CRM agile team, I collaborated with both business and technology owners and was responsible for overseeing key initiatives from problem definition to continuous improvement. These initiatives included the launch of several self-service support communities, the integration of an AI augmented chat tool, and the implementation of chatbot and embedded chat services.\nJuly 2019 - September 2020\n\nCS TECHNOLOGY ANALYST\nWILEY\nAs a part of my first corporate position, I enjoyed a variety of routine responsibilities including escalations support, UAT design and execution, and business process improvement. In service of these responsibilities, I supported both internal and external platform launches as a super user and primary escalation point. Later in my tenure, I shifted towards project work and played a significant role in the delivery of our Omni-Channel chat and softphone implementations.\nOctober 2016 - June 2019\n\nFOUNDER\nSHOWER THOUGHTS DEVELOPMENT\nEveryone starts somewhere, and during my time at The Innovation University ® I became the Founder and CEO of a game development startup. Our three-person crew worked with various outside partners on several projects, but ultimately focused on one mobile application for Android which offered challenging puzzles for players to conquer. The puzzles in our games were not the only challenging part of managing a startup, and today we are able to appreciate the lessons learned as we bring our experience to new places.\nNovember 2013 - Present (Inactive)\n\nTECHNICIAN INTERN\nNEIL BROOKS PLUMBING HEATING COOLING INC.\nMay 2013 - August 2014\n\nEDUCATION\n\nSTEVENS INSTITUTE OF TECHNOLOGY\nBACHELOR OF ENGINEERING, COMPUTER ENGINEERING\nAugust 2012 - May 2016\n\nMARINE ACADEMY OF TECHNOLOGY AND ENVIRONMENTAL SCIENCE\nSTEM HIGH SCHOOL\nSeptember 2008 - June 2012\n\nACHIEVEMENTS\n\nGold Level STAR Award (x2), Wiley\nCertified Scrum Product Owner (CSPO), Scrum Alliance (Inactive)\nCertified Salesforce Administrator\nCertified Five9 Contact Center Administrator\n9x Google Cloud Skills Boost Badges focused on Generative AI\nSix Sigma Green Belt, Villanova University\nMember of Khoda, the Senior Honor Society\nEagle Scout, Boy Scouts of America\n\nPROJECTS\n\nIn contrast to my day-job, which focuses mostly on strategy and product vision, I spend evenings working on side projects where I get to be both designer and developer. As the former President of the Stevens Game Development Club, I initially groomed my passion for programming through the unique lens of game design and later switched my focus to web development."})

async function generateText(prompt) {
    document.getElementById('sendButton').disabled = true;
    document.getElementById('sendButton').innerHTML = '<div id="spinner" class="lds-default"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>'
    document.getElementById('userInput').value = "";
    document.getElementById('userInput').placeholder = "Follow-up or ask another question...";
    document.getElementById('clearButton').style.display = "block";
    document.getElementById('clearButton').disabled = true;
    if (navigator.userAgent.match(/(iPhone|Android|BlackBerry|Windows Phone)/)) {
      document.getElementById('userInput').blur();
    }
    
    //document.getElementById("AIResponse").innerHTML += '<div class="user-message-card"><div class="sender-name">You</div><div class="message">' + prompt + '</div></div>';    
    document.getElementById('AIResponse').style.opacity = 1;
    document.getElementById("AIResponse").innerHTML = '<div class="user-message-card"><div class="sender-name">You</div><div class="message">' + prompt + '</div></div>' + document.getElementById("AIResponse").innerHTML;    
    //document.getElementById("AIResponse").innerHTML = '<div class="user-message-card"><div class="message">' + prompt + '</div></div>' + document.getElementById("AIResponse").innerHTML;    


    messageArray.push({role: "user", content: prompt})
    encodedMessageArray = { promptText: messageArray, version: 3 };
    console.log(encodedMessageArray);

    try {
        const response = await axios.post('https://gpt-test-app.herokuapp.com/generate-text', encodedMessageArray, {
            headers: {
              'Content-Type': 'application/json'
            }
        });
        botResponse = response.data.text;
        console.log(botResponse);

        messageArray.push({role: "assistant", content: botResponse})
        botResponseCleaned = botResponse.replace(/\n/g, "<br />");
        //document.getElementById("AIResponse").innerHTML += '<div class="bot-message-card"><div class="sender-name">Q</div><div class="message">' + botResponseCleaned + '</div></div>';
        document.getElementById("AIResponse").innerHTML = '<div class="bot-message-card"><div class="sender-name">AI Assistant</div><div class="message">' + botResponseCleaned + '</div></div>' + document.getElementById("AIResponse").innerHTML;
        //document.getElementById("AIResponse").innerHTML = '<div class="bot-message-card"><div class="message">' + botResponseCleaned + '</div></div>' + document.getElementById("AIResponse").innerHTML;
        document.getElementById('sendButton').disabled = false;
        document.getElementById('clearButton').disabled = false;
        document.getElementById('sendButton').innerHTML = '<i class="material-icons">send</i>'

    } catch (error) {
        console.error(error);
        document.getElementById("AIResponse").innerHTML = "Error: " + error;
    }
}

// Get the input field
var input = document.getElementById("userInput");

// Execute a function when the user presses a key on the keyboard
input.addEventListener("keypress", function(event) {
  // If the user presses the "Enter" key on the keyboard
  if (event.key === "Enter") {
    // Cancel the default action, if needed
    event.preventDefault();
    // Trigger the button element with a click
    document.getElementById("sendButton").click();
  }
});